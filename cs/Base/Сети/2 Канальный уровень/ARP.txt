ARP (Address Resolution Protocol - Протокол разрешения адресов) — это протокол, используемый для сопоставления IP-адресов с MAC-адресами в локальных сетях. Он играет ключевую роль в процессе передачи данных, позволяя устройствам находить физические адреса, необходимые для отправки пакетов.

ARP таблица храница в памяти операционной системы.

Основные функции ARP

	1. Определение MAC-адреса: ARP позволяет устройству узнать MAC-адрес другого устройства в сети, основываясь на его IP-адресе.

	2. Кэширование адресов: Протокол использует ARP-таблицу для хранения пар IP и MAC-адресов, что снижает количество запросов и экономит ресурсы сети.

Структура ARP-таблицы

	ARP-таблица содержит записи, которые могут быть:

		1. Динамические: автоматически создаются и удаляются по мере необходимости.

		2. Статические: добавляются вручную пользователем и сохраняются до тех пор, пока устройство не будет выключено.

	Пример записи ARP-таблицы

		IP - адрес 		Mac - адрес 			Тип

		192.168.1.1		08:10:29:00:2F:C3		динамический
		192.168.1.2 	08:30:39:00:2F:C4		статический

	В ARP-таблице также всегда хранится широковещательный адрес FF:FF:FF:FF:FF:FF, который используется для передачи запросов всем устройствам в сети.

Процесс работы ARP

	1. Проверка ARP-таблицы

		Когда устройство (например, компьютер) хочет отправить данные другому устройству, оно сначала проверяет свою ARP-таблицу на наличие соответствующего MAC-адреса для указанного IP-адреса.

	2. Отправка ARP-запроса

		Если нужный MAC-адрес не найден в таблице, устройство формирует ARP-запрос. Этот запрос представляет собой широковещательное сообщение, адресованное всем устройствам в локальной сети. Запрос содержит информацию о том, какой IP-адрес требуется разрешить в MAC-адрес. Например, запрос может звучать так: «Устройство с IP-адресом 192.168.1.2, сообщите свой MAC-адрес устройству с MAC-адресом ...».

	3. Получение ARP-запроса

		Все устройства в локальной сети получают этот ARP-запрос и сравнивают указанный IP с собственным. Если устройство находит совпадение (например, у него IP-адрес 192.168.1.2), оно формирует ARP-ответ, содержащий свой MAC-адрес.

	4. Отправка ARP-ответа

		Устройство с совпадающим IP отправляет ARP-ответ обратно к исходному устройству, указывая свой MAC-адрес. Этот ответ уже направлен на конкретный MAC-адрес отправителя запроса.

	5. Обновление ARP-таблицы

		После получения ответа устройство обновляет свою ARP-таблицу, добавляя новую запись о соответствии IP и MAC-адресов. 

	6. Передача данных

		Теперь, когда у устройства есть необходимый MAC-адрес, оно может сформировать Ethernet-кадр с данными и отправить его по сети на целевое устройство.

Время жизни записей

	Записи в ARP-таблице имеют ограниченное время жизни:

		- Если запись не используется в течение 2 минут, она удаляется.

		- Максимальное время хранения для динамических записей составляет 10 минут (в Windows и Linux), после чего требуется новый ARP-запрос. 

Зачем?
	
	Узнавать MAC-адреса других устройств по их IP-адресам с помощью ARP необходимо, поскольку канальный уровень работает на основе MAC-адресов, а не IP-адресов. Без ARP устройства не могут определить, какой MAC-адрес соответствует заданному IP-адресу, что делает невозможной передачу данных в локальной сети. ARP обеспечивает правильное сопоставление адресов, что критично для эффективного обмена данными и уменьшения задержек в сетевой коммуникации.

Таким образом, ARP и его таблица являются важными компонентами сетевой инфраструктуры, обеспечивая эффективное взаимодействие между устройствами в локальных сетях.
